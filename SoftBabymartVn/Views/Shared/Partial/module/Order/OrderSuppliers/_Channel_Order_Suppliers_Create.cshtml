<script src="~/Scripts/module/Order/m.Order.js"></script>
<script src="~/Scripts/module/Order/OrderSuppliers/mv.OrderSuppliers_Add.js"></script>
<script>
    var mOrderSuppliers = new Order.mvOrderSuppliersAdd();
    $(document).ready(function () {
        mOrderSuppliers.Start();
    });
</script>
<div id="OrderSuppliersAddViewId" class="row-fluid">
    <div class="span9">
        <div class="dataTables_wrapper">
            <div class="control-group">
                <div class="controls">
                    <input type="text" class="span12" placeholder="Tìm kiếm" data-bind="value: Keyword,valueUpdate: 'afterkeydown'">
                    <!--ko if: ListProductSearch().length >0 -->
                    <div class="search_recommended">
                        <ul>
                            <!--ko foreach:ListProductSearch -->
                            <li data-bind="text: ProductName, click: $parent.GetProduct"></li>
                            <!-- /ko -->
                        </ul>
                    </div>
                    <!-- /ko -->
                </div>
            </div>

            <!--ko if: mOrderSuppliers().Detail().length >0-->
            <table class="table table-striped table-bordered table-hover dataTable">
                <thead>
                    <tr>
                        <td>Mã hàng hóa</td>
                        <td>Tên hàng</td>
                        <td>Số lượng</td>
                        <td></td>
                    </tr>
                </thead>
                <tbody>
                    <!--ko foreach: mOrderSuppliers().Detail() -->
                    <tr class="odd">
                        <td class="text-center">
                            <span data-bind="text: Code"></span>
                        </td>
                        <td>
                            <span data-bind="text: ProductName"></span>
                        </td>
                        <td class="text-center">
                            <input data-bind="value: Total, valueUpdate: 'afterkeydown'" class="input-mini" />
                        </td>
                        <td>
                            <span class="btn btn-danger btn-small" data-bind="click: $parent.RemoveItem"><i class="icon-remove"></i></span>
                        </td>
                    </tr>
                    <!--/ko-->
                    <tr>
                        <td colspan="2" class="text-right">
                            <strong>Tổng tiền</strong>
                        </td>
                        <td  colspan="2"  class="text-center">
                            <span data-bind="text: mOrderSuppliers().Total"></span>
                        </td>
                    </tr>

                </tbody>
            </table>
            <!-- /ko -->
        </div>

        <!-- ko foreach: mOrderSuppliers_Print -->
            <div class="span12">
                <div class="widget-box">
                    <div class="widget-header">
                        <h4>In Đơn hàng</h4>
                        <span class="widget-toolbar">
                            <a href="#" data-action="settings">
                                <i class="icon-cog"></i>
                            </a>

                            <a href="#" data-action="reload">
                                <i class="icon-refresh"></i>
                            </a>
                            <a href="#" data-action="close">
                                <i class="icon-remove"></i>
                            </a>
                        </span>
                    </div>
                    <div class="widget-body">
                        <div class="widget-main" >
                            <div data-bind="attr:{'id':'printorder_' + suppliers().SuppliersId()}">
                                <div class="margin-bottom">
                                    <ul>
                                        <li>Công ty TNHH MTV Thương mại & Dịch vụ Babymart</li>
                                        <li>3/19 Phan Văn Sửu – P. 13 – Q. Tân Bình</li>
                                        <li>ĐT: 6672.0909 – 3812.3813 – Email: www.babymart.vn@gmail.com</li>
                                        <li>Người đặt hàng: @User.UserName</li>
                                </ul>
                                <h3 class="text-center margin-none">PHIẾU ĐẶT HÀNG</h3>
                                <p class="text-center">Ngày....tháng...năm....</p>

                            </div>
                            <ul class="six-columns m-auto">

                                <li>Gửi đến SPL: <span data-bind="text: suppliers().Name()"></span></li>
                                <li>Địa chỉ: <span data-bind="text: suppliers().Address()"></span></li>
                                <li>SĐT: <span data-bind="text: suppliers().Phone()"></span></li>
                                <li>Email: <span data-bind="text: suppliers().Email()"></span><span></span></li>
                            </ul>
                            <table class="table table-striped table-bordered table-hover dataTable">
                                <thead>
                                    <tr>
                                        <td>Mã hàng hóa</td>
                                        <td>Tên hàng</td>
                                        <td>Số lượng</td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!--ko foreach: products-->
                                    <tr class="odd">
                                        <td class="text-center">
                                            <span data-bind="text: Product().Code"></span>
                                        </td>
                                        <td>
                                            <span data-bind="text: Product().ProductName"></span>
                                        </td>
                                        <td class="text-center">
                                            <span data-bind="text: Total"></span>
                                        </td>
                                    </tr>
                                    <!--/ko-->
                                </tbody>
                            </table>
                        </div>
                             <div class="text-center m-auto">
                                <button class="btn btn-success" data-bind="click: $parents[0].Print"><i class="icon-print"></i> In</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        <!-- /ko -->
    </div>
    <div class="span3">
        <div class="widget-box">
            <div class="widget-header">
                <h4>Thông tin</h4>
                <span class="widget-toolbar">
                    <a href="#" data-action="settings">
                        <i class="icon-cog"></i>
                    </a>

                    <a href="#" data-action="reload">
                        <i class="icon-refresh"></i>
                    </a>

                    <a href="#" data-action="collapse">
                        <i class="icon-chevron-up"></i>
                    </a>

                    <a href="#" data-action="close">
                        <i class="icon-remove"></i>
                    </a>
                </span>
            </div>
            <div class="widget-body">
                <div class="widget-main">
                    <div class="tabbable">
                        <ul class="nav nav-tabs" id="myTab">
                            <li class="active">
                                <a data-toggle="tab" href="#home">
                                    Ghi chú
                                </a>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div id="home" class="tab-pane in active">
                                <p>
                                    <textarea data-bind="value: mOrderSuppliers().Note" class="span12"></textarea>
                                </p>
                            </div>
                        </div>
                    </div>
                    <p>
                        <button class="btn btn-success" data-bind="click: CreatOrderSuppliers">Hoàn thành</button>
                        <button class="btn btn-success" data-bind="click: CreatOrder_PrintSuppliers"><i class="icon-print"></i> In</button>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

